"use strict";var d=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var v=(e,t)=>{for(var r in t)d(e,r,{get:t[r],enumerable:!0})},A=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of D(t))!C.call(e,o)&&o!==r&&d(e,o,{get:()=>t[o],enumerable:!(n=N(t,o))||n.enumerable});return e};var w=e=>A(d({},"__esModule",{value:!0}),e);var k={};v(k,{Script:()=>l,ScriptResultDecoderError:()=>p,returnZeroScript:()=>U});module.exports=w(k);var x=require("@ethersproject/bytes"),s=require("@fuel-ts/abi-coder"),i=require("@fuel-ts/transactions");var h=require("@fuel-ts/constants"),f=require("@fuel-ts/transactions");var g=["Success","Revert","OutOfGas","TransactionValidity","MemoryOverflow","ArithmeticOverflow","ContractNotFound","MemoryOwnership","NotEnoughBalance","ExpectedInternalContext","AssetIdNotFound","InputNotFound","OutputNotFound","WitnessNotFound","TransactionMaturity","InvalidMetadataIdentifier","MalformedCallStructure","ReservedRegisterNotWritable","ErrorFlag","InvalidImmediateValue","ExpectedCoinInput","MaxMemoryAccess","MemoryWriteOverlap","ContractNotInInputs","InternalBalanceOverflow","ContractMaxSize","ExpectedUnallocatedStack","MaxStaticContractsReached","TransferAmountCannotBeZero","ExpectedOutputVariable","ExpectedParentInternalContext","IllegalJump","NonZeroMessageOutputRecipient","ZeroedMessageOutputRecipient"],R="https://docs.rs/fuel-asm/latest/fuel_asm/enum.PanicReason.html";var $=e=>g.includes(e)?e:"unknown",S=e=>{if((e==null?void 0:e.type)==="failure"){let t=$(e.reason);return{doc:t!=="unknown"?`${R}#variant.${t}`:R,reason:t}}return{doc:R,reason:"unknown"}};var O=(e,t)=>typeof t=="bigint"?t.toString():t,_=(e,t)=>`${e===h.ZeroBytes32?"script":e}: ${t}`,p=class extends Error{constructor(r,n,o){let E=JSON.stringify(S(r.status),null,2),y=r.receipts.filter(a=>a.type===f.ReceiptType.Revert),m=y.length?`Reverts:
${y.map(({id:a,...u})=>_(a,`${u.val} ${JSON.stringify(u,O)}`)).join(`
`)}`:null,T=o.length?`Logs:
${JSON.stringify(o,null,2)}`:null,I=`Receipts:
${JSON.stringify(r.receipts.map(({type:a,...u})=>({type:f.ReceiptType[a],...u})),O,2)}`;super(`${n}

${E}

${m?`${m}

`:""}${T?`${T}

`:""}${I}`);this.logs=o}};function M(e){let t=[...e.receipts],r=t.pop();if(!r)throw new Error("Expected scriptResultReceipt");if(r.type!==i.ReceiptType.ScriptResult)throw new Error(`Invalid scriptResultReceipt type: ${r.type}`);let n=t.pop();if(!n)throw new Error("Expected returnReceipt");if(n.type!==i.ReceiptType.Return&&n.type!==i.ReceiptType.ReturnData&&n.type!==i.ReceiptType.Revert)throw new Error(`Invalid returnReceipt type: ${n.type}`);return{code:r.result,gasUsed:r.gasUsed,receipts:t,scriptResultReceipt:r,returnReceipt:n,callResult:e}}var l=class{constructor(t,r,n){this.bytes=(0,x.arrayify)(t),this.scriptDataEncoder=r,this.scriptResultDecoder=n}getScriptDataOffset(){return s.VM_TX_MEMORY+s.TRANSACTION_SCRIPT_FIXED_SIZE+new i.ByteArrayCoder(this.bytes.length).encodedLength}getArgOffset(){return this.getScriptDataOffset()+s.ASSET_ID_LEN+s.WORD_SIZE+s.CONTRACT_ID_LEN+s.WORD_SIZE+s.WORD_SIZE}encodeScriptData(t){return this.scriptDataEncoder(t)}decodeCallResult(t,r=[]){try{let n=M(t);return this.scriptResultDecoder(n)}catch(n){throw new p(t,n.message,r)}}};var U=new l("0x24000000",()=>new Uint8Array(0),()=>{});0&&(module.exports={Script,ScriptResultDecoderError,returnZeroScript});
//# sourceMappingURL=index.js.map